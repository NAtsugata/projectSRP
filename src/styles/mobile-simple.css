/* =================================================================
   MOBILE PREMIUM - "ÉPURÉ & CLASSE"
   Correction des contrastes et Design Luxe
   ================================================================= */

@media (max-width: 640px) {

  /* --- 0. RESET OBLIGATOIRE (ANTI-BUG COULEURS) --- */
  /* Force le navigateur à ne pas inverser les couleurs en mode sombre */
  :root {
    color-scheme: light !important;
  }

  *, *::before, *::after {
    -webkit-font-smoothing: antialiased; /* Texte plus net */
    box-sizing: border-box;
  }

  /* --- 1. PALETTE DE COULEURS (LISIBILITÉ MAXIMALE) --- */
  :root {
    /* TEXTES */
    --text-main: #1a1a1a;        /* Noir Anthracite (Plus doux que #000) */
    --text-muted: #666666;       /* Gris moyen pour les infos secondaires */
    --text-inverse: #ffffff;     /* Blanc pour sur fond sombre */

    /* FONDS */
    --bg-page: #f8f5f2;          /* Blanc Cassé / Crème très subtil (Luxe) */
    --bg-card: #ffffff;          /* Blanc Pur */

    /* ACCENTS */
    --accent-copper: #B87333;    /* Cuivre */
    --accent-gold: #D4AF37;      /* Or (Bordures) */
    --accent-black: #000000;     /* Noir Profond (Boutons) */
  }

  /* --- 2. FOND DE PAGE & TEXTE GLOBAL --- */
  body {
    background: var(--bg-page) !important;
    color: var(--text-main) !important; /* Force le texte en NOIR par défaut */
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif !important;
  }

  /* Force la couleur noire sur TOUS les textes courants pour éviter le "blanc sur blanc" */
  p, h1, h2, h3, h4, h5, h6, span, div, li, td, th, label, strong, b {
    color: var(--text-main);
  }

  /* Textes secondaires (dates, petits détails) */
  small, .text-muted, .text-secondary, .subtitle {
    color: var(--text-muted) !important;
  }

  /* --- 3. CARTES & CONTENEURS (LISIBILITÉ) --- */
  .card, .modern-section, .document-card, .intervention-card, .stat-card, .white-container {
    background: var(--bg-card) !important; /* Fond BLANC forcé */
    border: 1px solid rgba(0, 0, 0, 0.05) !important; /* Bordure très fine */
    border-radius: 16px !important;
    padding: 20px !important;
    margin-bottom: 16px !important;
    /* Ombre douce et diffuse ("Soft UI") */
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.04) !important;
  }

  /* Titres dans les cartes */
  .card h2, .card h3, .modern-section h3, .view-title {
    color: var(--accent-black) !important;
    font-weight: 700 !important;
    letter-spacing: -0.5px !important;
    margin-bottom: 16px !important;
    background: none !important;
    -webkit-text-fill-color: initial !important; /* Annule les dégradés de texte bizarres */
  }

  /* --- 4. INPUTS (PROBLÈME NOIR SUR NOIR RÉSOLU) --- */
  input, textarea, select, .form-control {
    background: #ffffff !important;       /* Fond BLANC */
    color: #000000 !important;            /* Texte NOIR */
    border: 1px solid #e0e0e0 !important; /* Bordure Grise Claire */
    border-radius: 12px !important;
    padding: 14px !important;
    font-size: 16px !important;
    box-shadow: none !important;
  }

  input:focus, textarea:focus, select:focus {
    border-color: var(--accent-copper) !important;
    box-shadow: 0 0 0 1px var(--accent-copper) !important; /* Lueur cuivre fine */
    background: #ffffff !important;
  }

  /* Placeholder (Texte d'aide) */
  ::placeholder {
    color: #999999 !important;
    opacity: 1 !important;
  }

  /* --- 5. BOUTONS "IRIS" (CONTRASTE CORRIGÉ) --- */
  /* Le texte doit être BLANC sur le bouton sombre */
  button, .btn, .btn-primary, a.btn-primary {
    /* Dégradé Iris : Noir -> Cuivre */
    background: radial-gradient(circle at center, #000000 0%, #1a110a 40%, #B87333 100%) !important;

    /* TEXTE BLANC OBLIGATOIRE */
    color: #ffffff !important;

    /* Style */
    border: 1px solid #000000 !important;
    border-radius: 50px !important; /* Pilule */
    padding: 14px 24px !important;
    font-weight: 600 !important;
    font-size: 15px !important;
    box-shadow: 0 8px 16px rgba(184, 115, 51, 0.25) !important;
    text-shadow: none !important;

    /* Positionnement */
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    gap: 8px !important;
  }

  /* Icônes DANS les boutons (Forcer en blanc) */
  button svg, .btn svg, button i, .btn i {
    color: #ffffff !important;
    fill: #ffffff !important;
    stroke: #ffffff !important;
  }

  /* Boutons Secondaires (Annuler/Retour) */
  .btn-secondary, button.secondary, button[type="button"]:not(.btn-primary) {
    background: transparent !important;
    color: var(--text-main) !important; /* Texte Noir */
    border: 1px solid #e0e0e0 !important;
    box-shadow: none !important;
  }

  /* --- 6. NAVIGATION DU BAS (FLOTTANTE & PROPRE) --- */
  .mobile-nav {
    background: rgba(255, 255, 255, 0.95) !important; /* Blanc presque opaque */
    border-top: none !important;
    border: 1px solid rgba(0,0,0,0.05) !important;
    border-radius: 24px !important;

    /* Position Flottante */
    bottom: 20px !important;
    left: 16px !important;
    right: 16px !important;
    width: auto !important;

    /* Ombre de luxe */
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1) !important;
    padding: 12px 20px !important;
  }

  .mobile-nav-item {
    color: #999999 !important; /* Icônes inactives en gris */
  }

  .mobile-nav-item.active {
    color: var(--accent-copper) !important; /* Icône active en Cuivre */
    background: none !important;
  }

  .mobile-nav-item.active svg {
    stroke: var(--accent-copper) !important;
    stroke-width: 2.5px !important;
  }

  /* --- 7. TABLEAUX & LISTES --- */
  table {
    background: white !important;
    color: var(--text-main) !important;
  }

  th {
    color: var(--text-muted) !important;
    text-transform: uppercase !important;
    font-size: 11px !important;
    letter-spacing: 1px !important;
    border-bottom: 1px solid #eee !important;
  }

  td {
    color: var(--text-main) !important;
    border-bottom: 1px solid #f5f5f5 !important;
  }

  /* --- 8. CORRECTIFS SPÉCIAUX --- */

  /* Badges de statut (Succès/Erreur) - Texte lisible */
  .badge {
    color: #fff !important;
    font-weight: bold !important;
    border: none !important;
  }
  .badge-success { background: #2e7d32 !important; } /* Vert forêt */
  .badge-warning { background: #ed6c02 !important; } /* Orange foncé */
  .badge-danger { background: #d32f2f !important; }  /* Rouge sombre */

  /* Liens */
  a {
    color: var(--accent-copper) !important;
    text-decoration: none !important;
  }
}
