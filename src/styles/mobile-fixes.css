/* ============================================
   MOBILE FIXES - Corrections Visuelles
   Corrige les problèmes sombres + icônes manquantes
   ============================================ */

/* ==================== ÉCLAIRCIR L'INTERFACE MOBILE ==================== */

@media (max-width: 640px) {
  /* Body plus clair sur mobile */
  body {
    background-color: #ffffff !important;
    color: #1f2937 !important;
  }

  /* Containers principaux plus clairs */
  .admin-dashboard,
  .agenda-view,
  .coffre-view,
  .employee-planning-view,
  .admin-planning-view,
  .intervention-detail-modern {
    background: #ffffff !important;
  }

  /* Cards et sections plus claires */
  .modern-section,
  .document-card,
  .stat-card,
  .planning-form-section,
  .coffre-controls,
  .intervention-card,
  .agenda-day-card {
    background: #ffffff !important;
    border: 1px solid #e5e7eb !important;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1) !important;
  }

  /* Headers et titres visibles */
  .view-title,
  .planning-title,
  .section-title,
  .category-title,
  .dashboard-title {
    color: #1f2937 !important;
    -webkit-text-fill-color: #1f2937 !important;
  }

  /* Texte principal bien visible */
  p,
  span,
  div,
  label,
  .text-primary {
    color: #1f2937 !important;
  }

  /* Texte secondaire plus lisible */
  .text-secondary,
  .meta-item,
  .stat-label,
  .header-subtitle {
    color: #6b7280 !important;
  }

  /* Inputs et formulaires clairs */
  input,
  textarea,
  select,
  .form-input,
  .form-control,
  .search-input {
    background: #ffffff !important;
    border: 2px solid #d1d5db !important;
    color: #1f2937 !important;
  }

  input::placeholder,
  textarea::placeholder {
    color: #9ca3af !important;
  }

  /* Boutons bien visibles */
  .btn-primary,
  .btn-primary-modern {
    background: linear-gradient(135deg, #6366f1, #8b5cf6) !important;
    color: #ffffff !important;
    border: none !important;
  }

  .btn-secondary,
  .btn-secondary-modern {
    background: #f3f4f6 !important;
    color: #1f2937 !important;
    border: 1px solid #d1d5db !important;
  }
}

/* ==================== FORCER ICÔNES VISIBLES ==================== */

@media (max-width: 640px) {
  /* IMPORTANT: Containers des icônes - pas d'overflow hidden */
  .view-title,
  .planning-title,
  .section-title,
  .category-title,
  .dashboard-title,
  .header-top,
  .planning-header,
  .coffre-header {
    overflow: visible !important;
    text-overflow: clip !important;
    white-space: normal !important;
  }

  /* Toutes les icônes SVG visibles */
  svg,
  .icon,
  [class*="Icon"],
  .title-icon,
  .section-title-icon,
  .mobile-nav-icon {
    display: inline-block !important;
    visibility: visible !important;
    opacity: 1 !important;
    color: #6366f1 !important;
    fill: currentColor !important;
    flex-shrink: 0 !important;
    overflow: visible !important;
  }

  /* Icônes dans les titres */
  .view-title svg,
  .planning-title svg,
  .section-title svg {
    width: 28px !important;
    height: 28px !important;
    min-width: 28px !important;
    min-height: 28px !important;
    color: #6366f1 !important;
    flex-shrink: 0 !important;
    margin-right: 8px !important;
  }

  /* Icônes emoji toujours visibles */
  .view-title::before,
  .planning-title::before,
  .title-icon {
    display: inline-block !important;
    opacity: 1 !important;
    font-size: 32px !important;
  }

  /* Icônes dans les boutons */
  button svg,
  .btn svg,
  a svg {
    width: 20px !important;
    height: 20px !important;
    color: inherit !important;
    display: inline-block !important;
  }

  /* Icônes de navigation */
  .mobile-nav-icon {
    width: 24px !important;
    height: 24px !important;
    display: block !important;
  }

  /* File icons dans coffre */
  .file-icon {
    font-size: 48px !important;
    display: block !important;
    opacity: 1 !important;
  }
}

/* ==================== DÉSACTIVER DARK MODE SUR MOBILE ==================== */

@media (max-width: 640px) {
  /* Forcer le mode clair */
  * {
    color-scheme: light !important;
  }

  /* Annuler tous les styles dark mode */
  @media (prefers-color-scheme: dark) {
    body,
    .document-card,
    .modern-section,
    .stat-card,
    input,
    select,
    textarea {
      background: #ffffff !important;
      color: #1f2937 !important;
      border-color: #e5e7eb !important;
    }
  }
}

/* ==================== AMÉLIORER CONTRASTE MOBILE ==================== */

@media (max-width: 640px) {
  /* Borders plus visibles */
  .border,
  [class*="border"] {
    border-color: #d1d5db !important;
  }

  /* Séparateurs visibles */
  hr,
  .divider {
    border-color: #e5e7eb !important;
    opacity: 1 !important;
  }

  /* Links bien visibles */
  a {
    color: #6366f1 !important;
    text-decoration: none;
  }

  a:hover {
    color: #4f46e5 !important;
    text-decoration: underline;
  }

  /* Badges et tags clairs */
  .badge,
  .tag {
    background: #6366f1 !important;
    color: #ffffff !important;
  }

  /* Stats cards colorées et visibles */
  .stat-card {
    background: linear-gradient(135deg, #6366f1, #8b5cf6) !important;
    color: #ffffff !important;
  }

  .stat-number {
    color: #ffffff !important;
  }

  .stat-label {
    color: rgba(255, 255, 255, 0.9) !important;
  }
}

/* ==================== NAVIGATION MOBILE CLAIRE ==================== */

@media (max-width: 640px) {
  .mobile-nav {
    background: #ffffff !important;
    border-top: 2px solid #e5e7eb !important;
    box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1) !important;
  }

  .mobile-nav-item {
    color: #6b7280 !important;
  }

  .mobile-nav-item.active {
    color: #6366f1 !important;
    font-weight: 600 !important;
  }

  .mobile-nav-item svg {
    color: inherit !important;
  }
}

/* ==================== HEADER MOBILE CLAIR ==================== */

@media (max-width: 640px) {
  .planning-header,
  .coffre-header,
  .dashboard-header {
    background: linear-gradient(135deg, #f0f9ff, #fef3f9) !important;
    border: none !important;
  }

  .header-top {
    background: transparent !important;
  }
}

/* ==================== MODALS CLAIRES ==================== */

@media (max-width: 640px) {
  .modal-overlay {
    background: rgba(0, 0, 0, 0.5) !important;
  }

  .modal-content {
    background: #ffffff !important;
    color: #1f2937 !important;
  }

  .modal-header {
    background: #ffffff !important;
    border-bottom: 1px solid #e5e7eb !important;
  }
}

/* ==================== ALERTS ET TOASTS CLAIRS ==================== */

@media (max-width: 640px) {
  .alert,
  .toast {
    background: #ffffff !important;
    border: 1px solid #e5e7eb !important;
    color: #1f2937 !important;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) !important;
  }

  .alert-success {
    background: #ecfdf5 !important;
    border-color: #10b981 !important;
    color: #065f46 !important;
  }

  .alert-error {
    background: #fef2f2 !important;
    border-color: #ef4444 !important;
    color: #991b1b !important;
  }

  .alert-warning {
    background: #fffbeb !important;
    border-color: #f59e0b !important;
    color: #78350f !important;
  }

  .alert-info {
    background: #eff6ff !important;
    border-color: #3b82f6 !important;
    color: #1e3a8a !important;
  }
}

/* ==================== TABLES MOBILES CLAIRES ==================== */

@media (max-width: 640px) {
  table,
  .table {
    background: #ffffff !important;
    color: #1f2937 !important;
  }

  thead {
    background: #f9fafb !important;
  }

  th {
    color: #1f2937 !important;
    font-weight: 600 !important;
  }

  td {
    border-color: #e5e7eb !important;
  }

  tr:hover {
    background: #f9fafb !important;
  }
}

/* ==================== LOADING STATES CLAIRS ==================== */

@media (max-width: 640px) {
  .loading-spinner,
  .spinner {
    border-color: #e5e7eb !important;
    border-top-color: #6366f1 !important;
  }

  .skeleton {
    background: linear-gradient(
      90deg,
      #f3f4f6 25%,
      #e5e7eb 50%,
      #f3f4f6 75%
    ) !important;
  }
}

/* ==================== EMPTY STATES CLAIRS ==================== */

@media (max-width: 640px) {
  .empty-state,
  .empty-vault,
  .no-results {
    background: #f9fafb !important;
    border: 2px dashed #d1d5db !important;
    color: #6b7280 !important;
  }

  .empty-state-icon,
  .empty-icon {
    opacity: 0.5 !important;
    filter: none !important;
  }

  .empty-state-title {
    color: #1f2937 !important;
  }
}

/* ==================== CHECKPOINTS CLAIRS ==================== */

@media (max-width: 640px) {
  .checkpoint-item {
    background: #ffffff !important;
    border: 2px solid #e5e7eb !important;
  }

  .checkpoint-item.completed {
    background: #ecfdf5 !important;
    border-color: #10b981 !important;
  }

  .checkpoint-label {
    color: #1f2937 !important;
  }

  .checkpoint-item.completed .checkpoint-label {
    color: #065f46 !important;
  }
}

/* ==================== DOCUMENT PREVIEW CLAIR ==================== */

@media (max-width: 640px) {
  .document-preview {
    background: linear-gradient(135deg, #6366f1, #8b5cf6) !important;
  }

  .file-ext {
    background: rgba(255, 255, 255, 0.95) !important;
    color: #1f2937 !important;
  }
}

/* ==================== TABS MOBILES CLAIRS ==================== */

@media (max-width: 640px) {
  .tabs {
    background: #ffffff !important;
    border-bottom: 2px solid #e5e7eb !important;
  }

  .tab {
    color: #6b7280 !important;
  }

  .tab.active {
    color: #6366f1 !important;
    border-bottom: 2px solid #6366f1 !important;
  }
}

/* ==================== CORRECTIONS SPÉCIFIQUES PAGES ==================== */

/* LoginScreen */
@media (max-width: 640px) {
  .login-screen {
    background: linear-gradient(135deg, #667eea, #764ba2) !important;
  }

  .login-card {
    background: #ffffff !important;
    color: #1f2937 !important;
  }

  .login-title {
    color: #1f2937 !important;
  }
}

/* Planning */
@media (max-width: 640px) {
  .planning-description {
    background: #f0f9ff !important;
    border-left-color: #6366f1 !important;
  }

  .planning-description p {
    color: #1e3a8a !important;
  }
}

/* Agenda */
@media (max-width: 640px) {
  .agenda-day-card {
    background: #ffffff !important;
    border: 1px solid #e5e7eb !important;
  }

  .agenda-day-header {
    background: #f9fafb !important;
    color: #1f2937 !important;
  }
}

/* Dashboard */
@media (max-width: 640px) {
  .dashboard-stats {
    background: transparent !important;
  }

  .activity-timeline {
    background: #ffffff !important;
  }

  .timeline-item {
    border-left-color: #e5e7eb !important;
  }
}

/* ==================== SCROLL BARS CLAIRES ==================== */

@media (max-width: 640px) {
  ::-webkit-scrollbar-track {
    background: #f9fafb !important;
  }

  ::-webkit-scrollbar-thumb {
    background: #d1d5db !important;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: #9ca3af !important;
  }
}

/* ==================== FOCUS STATES VISIBLES ==================== */

@media (max-width: 640px) {
  *:focus,
  *:focus-visible {
    outline: 3px solid #6366f1 !important;
    outline-offset: 2px !important;
  }

  input:focus,
  textarea:focus,
  select:focus {
    border-color: #6366f1 !important;
    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1) !important;
  }
}

/* ==================== DISABLE GRADIENTS SOMBRES ==================== */

@media (max-width: 640px) {
  /* Remplacer les gradients sombres par des couleurs claires */
  .gradient-dark,
  [class*="gradient"] {
    background: #ffffff !important;
  }

  /* Sauf les gradients de boutons primaires */
  .btn-primary,
  .btn-primary-modern,
  .stat-card {
    /* Garder leur gradient */
  }
}

/* ==================== AMÉLIORER LISIBILITÉ TEXTE ==================== */

@media (max-width: 640px) {
  /* Taille minimale de texte */
  * {
    -webkit-text-size-adjust: 100%;
    text-size-adjust: 100%;
  }

  /* Texte principal plus gros */
  body,
  p,
  li,
  span,
  div {
    font-size: 16px !important;
    line-height: 1.6 !important;
  }

  /* Petits textes lisibles */
  small,
  .text-sm,
  .text-xs {
    font-size: 14px !important;
    color: #6b7280 !important;
  }

  /* Labels bien visibles */
  label {
    font-size: 14px !important;
    font-weight: 600 !important;
    color: #374151 !important;
  }
}

/* ==================== SHADOW PLUS LÉGÈRES ==================== */

@media (max-width: 640px) {
  [class*="shadow"] {
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1) !important;
  }

  .shadow-lg {
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1) !important;
  }

  .shadow-xl {
    box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1) !important;
  }
}

/* ==================== CORRECTIONS FINALES ==================== */

@media (max-width: 640px) {
  /* Supprimer les overlay sombres */
  .overlay,
  [class*="overlay"] {
    background: rgba(0, 0, 0, 0.3) !important;
  }

  /* Status badges visibles */
  .status-badge {
    font-weight: 600 !important;
    padding: 4px 12px !important;
  }

  .status-pending {
    background: #fef3c7 !important;
    color: #92400e !important;
  }

  .status-completed {
    background: #d1fae5 !important;
    color: #065f46 !important;
  }

  .status-urgent {
    background: #fee2e2 !important;
    color: #991b1b !important;
  }

  /* Priority badges */
  .priority-high {
    background: #fee2e2 !important;
    color: #991b1b !important;
  }

  .priority-medium {
    background: #fef3c7 !important;
    color: #92400e !important;
  }

  .priority-low {
    background: #dbeafe !important;
    color: #1e3a8a !important;
  }
}
